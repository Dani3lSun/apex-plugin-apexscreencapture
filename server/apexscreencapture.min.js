var apexScreenCapture={parseBoolean:function(a){var b;"true"==a.toLowerCase()&&(b=!0);"false"==a.toLowerCase()&&(b=!1);"true"!=a.toLowerCase()&&"false"!=a.toLowerCase()&&(b=void 0);return b},clob2Array:function(a,b,c){loopCount=Math.floor(a.length/b)+1;for(var d=0;d<loopCount;d++)c.push(a.slice(b*d,b*(d+1)));return c},dataURI2base64:function(a){return a.substr(a.indexOf(",")+1)},getImage:function(a,b,c){b=b.toDataURL("image/png");"Y"==c?0===navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent)?
window.location.href=b:window.open(b,"_blank"):(c=apexScreenCapture.dataURI2base64(b),b=[],b=apexScreenCapture.clob2Array(c,3E4,b),apex.server.plugin(a,{f01:b},{dataType:"html",success:function(){$("body").trigger("screencapture-saved-db")},error:function(a,b){$("body").trigger("screencapture-error-db");console.log("getImage: apex.server.plugin ERROR:",b)}}))},dohtml2canvas:function(a,b,c,d,e,f,g,k,h){h&&(console.log("dohtml2canvas: HTML element:",a),console.log("dohtml2canvas: element width:",e),
console.log("dohtml2canvas: element height:",f));html2canvas($(a),{onrendered:function(a){apexScreenCapture.getImage(c,a,b)},background:d,width:e,height:f,letterRendering:g,allowTaint:k,logging:h})},dohtml2canvasDom:function(a,b,c,d,e,f,g){a.id?phtmlElem="#"+a.id:a.className&&(phtmlElem=a.tagName.toLowerCase(),phtmlElem+=("."+jQuery.trim(a.className).replace(/ /g,".")).replace(/\.\.+/g,"."));pwidth=$(a).width();pheight=$(a).height();g&&(console.log("dohtml2canvasDom: HTML element:",phtmlElem),console.log("dohtml2canvasDom: element width:",
pwidth),console.log("dohtml2canvasDom: element height:",pheight),console.log("dohtml2canvasDom: Clicked element:",a));html2canvas($(phtmlElem),{onrendered:function(a){apexScreenCapture.getImage(c,a,b)},background:d,width:pwidth,height:pheight,letterRendering:e,allowTaint:f,logging:g})},captureScreen:function(){var a=this.action.ajaxIdentifier,b=this.action.attribute01,c=this.action.attribute02,d=this.action.attribute04,e=parseInt(this.action.attribute05),f=parseInt(this.action.attribute06),g=apexScreenCapture.parseBoolean(this.action.attribute07),
k=apexScreenCapture.parseBoolean(this.action.attribute08),h=apexScreenCapture.parseBoolean(this.action.attribute09),p=this.action.attribute10,l=this.action.attribute11,m=apexScreenCapture.parseBoolean(this.action.attribute12),n=apexScreenCapture.parseBoolean(this.action.attribute13),q=this.action.attribute14,r=parseInt(document.documentElement.clientWidth),t=parseInt(document.documentElement.clientHeight);if(null===e||void 0===e||isNaN(parseFloat(e)))e=r;if(null===f||void 0===f||isNaN(parseFloat(f)))f=
t;if(null===l||void 0===l)l=!1;if(null===m||void 0===m)m=!1;if(null===n||void 0===n)n=!1;h&&(console.log("captureScreen: Attribute JQuery selector:",b),console.log("captureScreen: Attribute open window:",c),console.log("captureScreen: Attribute background:",d),console.log("captureScreen: Attribute element width:",e),console.log("captureScreen: Attribute element height:",f),console.log("captureScreen: Attribute letter rendering:",g),console.log("captureScreen: Attribute allow taint:",k),console.log("captureScreen: Attribute Logging:",
h),console.log("captureScreen: Attribute DOM selector:",p),console.log("captureScreen: Attribute DOM filter:",l),console.log("captureScreen: Attribute hide label:",m),console.log("captureScreen: Attribute fill content:",n),console.log("captureScreen: Attribute border color:",q));"Y"==p?DomOutline({onClick:function(b){apexScreenCapture.dohtml2canvasDom(b,c,a,d,g,k,h)},filter:l,stopOnClick:!0,borderColor:q,hideLabel:m,fillContent:n}).start():apexScreenCapture.dohtml2canvas(b,c,a,d,e,f,g,k,h)}};
