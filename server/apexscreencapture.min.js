var apexScreenCapture={parseBoolean:function(a){var b;"true"==a.toLowerCase()&&(b=!0);"false"==a.toLowerCase()&&(b=!1);"true"!=a.toLowerCase()&&"false"!=a.toLowerCase()&&(b=void 0);return b},clob2Array:function(a,b,e){loopCount=Math.floor(a.length/b)+1;for(var c=0;c<loopCount;c++)e.push(a.slice(b*c,b*(c+1)));return e},dataURI2base64:function(a){return a.substr(a.indexOf(",")+1)},getBrowserName:function(){var a=navigator.userAgent,b=navigator.appName,e,c;-1!=a.indexOf("Opera")?b="opera":-1!=a.indexOf("MSIE")?
b="ie":-1!=a.indexOf("Trident")?b="ie":-1!=a.indexOf("Edge")?b="edge":-1!=a.indexOf("Chrome")?b="chrome":-1!=a.indexOf("Safari")?b="safari":-1!=a.indexOf("Firefox")?b="firefox":(e=a.lastIndexOf(" ")+1)<(c=a.lastIndexOf("/"))&&(b=a.substring(e,c),b.toLowerCase()==b.toUpperCase()&&(b=navigator.appName));return b},getImage:function(a,b,e,c,f){var d=b.toDataURL(c);"Y"==e?(a=apexScreenCapture.getBrowserName(),"ie"==a||"edge"==a?window.navigator.msSaveBlob(b.msToBlob(),"screenshot.png"):apex.navigation.openInNewWindow(d,
"CapturedImageWindow"),f()):(b=apexScreenCapture.dataURI2base64(d),d=[],d=apexScreenCapture.clob2Array(b,3E4,d),apex.server.plugin(a,{f01:d,x01:c},{dataType:"html",success:function(){$("body").trigger("screencapture-saved-db");f()},error:function(a,b){$("body").trigger("screencapture-error-db");console.log("getImage: apex.server.plugin ERROR:",b);f()}}))},doHtml2Canvas:function(a,b,e,c,f,d,h,g,k,l){l&&(console.log("doHtml2Canvas: HTML element:",a),console.log("doHtml2Canvas: element width:",f),console.log("doHtml2Canvas: element height:",
d));html2canvas($(a),{onrendered:function(a){var c=apex.util.showSpinner($("body"));apexScreenCapture.getImage(e,a,b,k,function(){c.remove()})},background:c,width:f,height:d,letterRendering:h,allowTaint:g,logging:l})},doHtml2CanvasDom:function(a,b,e,c,f,d,h,g){a.id?pHtmlElem="#"+a.id:a.className&&(pHtmlElem=a.tagName.toLowerCase(),pHtmlElem+=("."+jQuery.trim(a.className).replace(/ /g,".")).replace(/\.\.+/g,"."));pWidth=$(a).width();pHeight=$(a).height();g&&(console.log("doHtml2CanvasDom: HTML element:",
pHtmlElem),console.log("doHtml2CanvasDom: element width:",pWidth),console.log("doHtml2CanvasDom: element height:",pHeight),console.log("doHtml2CanvasDom: Clicked element:",a));html2canvas($(pHtmlElem),{onrendered:function(a){var c=apex.util.showSpinner($("body"));apexScreenCapture.getImage(e,a,b,h,function(){c.remove()})},background:c,width:pWidth,height:pHeight,letterRendering:f,allowTaint:d,logging:g})},captureScreen:function(){var a=this.action.ajaxIdentifier,b=this.action.attribute01,e=this.action.attribute02,
c=this.action.attribute04,f=parseInt(this.action.attribute05),d=parseInt(this.action.attribute06),h=apexScreenCapture.parseBoolean(this.action.attribute07),g=apexScreenCapture.parseBoolean(this.action.attribute08),k=apexScreenCapture.parseBoolean(this.action.attribute09),l=this.action.attribute10,m=this.action.attribute11,n=apexScreenCapture.parseBoolean(this.action.attribute12),p=apexScreenCapture.parseBoolean(this.action.attribute13),r=this.action.attribute14,t=this.action.attribute15,q,u=parseInt(document.documentElement.clientWidth),
v=parseInt(document.documentElement.clientHeight);if(null===f||void 0===f||isNaN(parseFloat(f)))f=u;if(null===d||void 0===d||isNaN(parseFloat(d)))d=v;if(null===m||void 0===m)m=!1;if(null===n||void 0===n)n=!1;if(null===p||void 0===p)p=!1;q="PNG"==t?"image/png":"JPEG"==t?"image/jpeg":"image/png";k&&(console.log("captureScreen: Attribute JQuery selector:",b),console.log("captureScreen: Attribute open window:",e),console.log("captureScreen: Attribute background:",c),console.log("captureScreen: Attribute element width:",
f),console.log("captureScreen: Attribute element height:",d),console.log("captureScreen: Attribute letter rendering:",h),console.log("captureScreen: Attribute allow taint:",g),console.log("captureScreen: Attribute Logging:",k),console.log("captureScreen: Attribute DOM selector:",l),console.log("captureScreen: Attribute DOM filter:",m),console.log("captureScreen: Attribute hide label:",n),console.log("captureScreen: Attribute fill content:",p),console.log("captureScreen: Attribute border color:",r),
console.log("captureScreen: Attribute image mime-type:",q));"Y"==l?DomOutline({onClick:function(b){apexScreenCapture.doHtml2CanvasDom(b,e,a,c,h,g,q,k)},filter:m,stopOnClick:!0,borderColor:r,hideLabel:n,fillContent:p}).start():apexScreenCapture.doHtml2Canvas(b,e,a,c,f,d,h,g,q,k)}};
