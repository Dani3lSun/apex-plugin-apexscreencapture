var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
var apexScreenCapture={parseBoolean:function(a){var b;"true"==a.toLowerCase()&&(b=!0);"false"==a.toLowerCase()&&(b=!1);"true"!=a.toLowerCase()&&"false"!=a.toLowerCase()&&(b=void 0);return b},clob2Array:function(a,b,c){loopCount=Math.floor(a.length/b)+1;for(var d=0;d<loopCount;d++)c.push(a.slice(b*d,b*(d+1)));return c},dataURI2base64:function(a){return a.substr(a.indexOf(",")+1)},getBrowserName:function(){var a=navigator.userAgent,b=navigator.appName,c,d;-1!=a.indexOf("Opera")?b="opera":-1!=a.indexOf("MSIE")?
b="ie":-1!=a.indexOf("Trident")?b="ie":-1!=a.indexOf("Edge")?b="edge":-1!=a.indexOf("Chrome")?b="chrome":-1!=a.indexOf("Safari")?b="safari":-1!=a.indexOf("Firefox")?b="firefox":(c=a.lastIndexOf(" ")+1)<(d=a.lastIndexOf("/"))&&(b=a.substring(c,d),b.toLowerCase()==b.toUpperCase()&&(b=navigator.appName));return b},svg2canvas:function(a,b){try{var c,d;$(a).find("svg").each(function(){c=document.createElement("canvas");c.className="tempCanvas";$(this).attr("width",$(this).innerWidth());$(this).attr("height",
$(this).innerHeight());d=(new XMLSerializer).serializeToString(this);d=d.replace(/xmlns=\"http:\/\/www\.w3\.org\/2000\/svg\"/,"");canvg(c,d);$(c).insertAfter(this);$(this).attr("class","tempHide");$(this).hide()});b()}catch(e){b()}},getImage:function(a,b,c,d,e){var f=b.toDataURL(d);"Y"==c?(a=apexScreenCapture.getBrowserName(),"ie"==a||"edge"==a?window.navigator.msSaveBlob(b.msToBlob(),"screenshot.png"):apex.navigation.openInNewWindow(f,"CapturedImageWindow"),e()):(b=apexScreenCapture.dataURI2base64(f),
f=[],f=apexScreenCapture.clob2Array(b,3E4,f),apex.server.plugin(a,{f01:f,x01:d},{dataType:"html",success:function(){$("body").trigger("screencapture-saved-db");e()},error:function(a,b){$("body").trigger("screencapture-error-db");console.log("getImage: apex.server.plugin ERROR:",b);e()}}))},doHtml2Canvas:function(a,b,c,d,e,f,l,h,g,m){m&&(console.log("doHtml2Canvas: HTML element:",a),console.log("doHtml2Canvas: element width:",e),console.log("doHtml2Canvas: element height:",f));var k=apex.util.showSpinner($("body"));
k.attr("data-html2canvas-ignore","true");apexScreenCapture.svg2canvas("body",function(){html2canvas($(a),{onrendered:function(a){apexScreenCapture.getImage(c,a,b,g,function(){k.remove()})},background:d,width:e,height:f,letterRendering:l,allowTaint:h,logging:m});$("body").find(".tempCanvas").remove();$("body").find(".tempHide").show().removeClass("tempHide")})},doHtml2CanvasDom:function(a,b,c,d,e,f,l,h){pWidth=$(a).width();pHeight=$(a).height();h&&(console.log("doHtml2CanvasDom: Clicked element:",
a),console.log("doHtml2CanvasDom: element width:",pWidth),console.log("doHtml2CanvasDom: element height:",pHeight));var g=apex.util.showSpinner($("body"));g.attr("data-html2canvas-ignore","true");apexScreenCapture.svg2canvas("body",function(){html2canvas($(a),{onrendered:function(a){apexScreenCapture.getImage(c,a,b,l,function(){g.remove()})},background:d,width:pWidth,height:pHeight,letterRendering:e,allowTaint:f,logging:h});$("body").find(".tempCanvas").remove();$("body").find(".tempHide").show().removeClass("tempHide")})},
captureScreen:function(){var a=this.action.ajaxIdentifier,b=this.action.attribute01,c=this.action.attribute02,d=this.action.attribute04,e=parseInt(this.action.attribute05),f=parseInt(this.action.attribute06),l=apexScreenCapture.parseBoolean(this.action.attribute07),h=apexScreenCapture.parseBoolean(this.action.attribute08),g=apexScreenCapture.parseBoolean(this.action.attribute09),m=this.action.attribute10,k=this.action.attribute11,n=apexScreenCapture.parseBoolean(this.action.attribute12),p=apexScreenCapture.parseBoolean(this.action.attribute13),
r=this.action.attribute14,t=this.action.attribute15,q,u=parseInt(document.documentElement.clientWidth),v=parseInt(document.documentElement.clientHeight);if(null===e||void 0===e||isNaN(parseFloat(e)))e=u;if(null===f||void 0===f||isNaN(parseFloat(f)))f=v;if(null===k||void 0===k)k=!1;if(null===n||void 0===n)n=!1;if(null===p||void 0===p)p=!1;q="PNG"==t?"image/png":"JPEG"==t?"image/jpeg":"image/png";g&&(console.log("captureScreen: Attribute JQuery selector:",b),console.log("captureScreen: Attribute open window:",
c),console.log("captureScreen: Attribute background:",d),console.log("captureScreen: Attribute element width:",e),console.log("captureScreen: Attribute element height:",f),console.log("captureScreen: Attribute letter rendering:",l),console.log("captureScreen: Attribute allow taint:",h),console.log("captureScreen: Attribute Logging:",g),console.log("captureScreen: Attribute DOM selector:",m),console.log("captureScreen: Attribute DOM filter:",k),console.log("captureScreen: Attribute hide label:",n),
console.log("captureScreen: Attribute fill content:",p),console.log("captureScreen: Attribute border color:",r),console.log("captureScreen: Attribute image mime-type:",q));"Y"==m?DomOutline({onClick:function(b){apexScreenCapture.doHtml2CanvasDom(b,c,a,d,l,h,q,g)},filter:k,stopOnClick:!0,borderColor:r,hideLabel:n,fillContent:p}).start():apexScreenCapture.doHtml2Canvas(b,c,a,d,e,f,l,h,q,g)}};
