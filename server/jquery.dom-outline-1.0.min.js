var DomOutline=function(h){function k(b){b=b.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(b,a,f,d){return a+a+f+f+d+d});return(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null}function m(){if(!0!==a.initialized){var b;b=a.opts.borderColor;var e=-.3;b=String(b).replace(/[^0-9a-f]/gi,"");6>b.length&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]);var e=e||0,c="#",f,d;for(d=0;3>d;d++)f=parseInt(b.substr(2*d,2),16),f=Math.round(Math.min(Math.max(0,
f+f*e),255)).toString(16),c+=("00"+f).substr(f.length);b=c;b=k(b).r+", "+k(b).g+", "+k(b).b;b="."+a.opts.namespace+" {    background: "+a.opts.borderColor+";    position: absolute;    z-index: 1000000;}."+a.opts.namespace+"_label {    background: "+a.opts.borderColor+";    border-radius: 2px;    color: #fff;    font: bold 12px/12px Helvetica, sans-serif;    padding: 4px 6px;    position: absolute;    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.25);    z-index: 1000001;}."+a.opts.namespace+"_label.hidden {    display: none;}."+
a.opts.namespace+"_fill_content {    background: rgba("+b+", 0.3) !important;    background-color: rgba("+b+", 0.3) !important;}";e=document.createElement("style");e.type="text/css";document.getElementsByTagName("head")[0].appendChild(e);e.styleSheet?e.styleSheet.cssText=b:e.innerHTML=b;a.initialized=!0}}function n(){jQuery.each(a.elements,function(a,e){e.remove()})}function p(b){if("resize"!=b.type){if(b.target.className&&-1!==b.target.className.indexOf(a.opts.namespace)||a.opts.filter&&!jQuery(b.target).is(a.opts.filter))return;
g.element=b.target}else if(!g.element)return;a.opts.hideLabel||jQuery("."+a.opts.namespace+"_label").removeClass("hidden");b=a.opts.borderWidth;var e;a.elements.window||(a.elements.window=jQuery(window));e=a.elements.window.scrollTop();var c=g.element.getBoundingClientRect(),f=c.top+e,d;d=g.element;var h=c.width,k=c.height,l=d.tagName.toLowerCase();d.id&&(l+="#"+d.id);d.className&&(l+=("."+jQuery.trim(d.className).replace(/ /g,".")).replace(/\.\.+/g,"."));d=l+" ("+Math.round(h)+"x"+Math.round(k)+
")";g.element.label=d;a.opts.fillContent&&($("body").find("."+a.opts.namespace+"_fill_content").removeClass(a.opts.namespace+"_fill_content"),$(g.element).addClass(a.opts.namespace+"_fill_content"),$(g.element).find("*").addClass(a.opts.namespace+"_fill_content"));a.elements.label.css({top:Math.max(0,f-20-b,e),left:Math.max(0,c.left-b)}).text(d);a.elements.top.css({top:Math.max(0,f-b),left:c.left-b,width:c.width+b,height:b});a.elements.bottom.css({top:f+c.height,left:c.left-b,width:c.width+b,height:b});
a.elements.left.css({top:f-b,left:Math.max(0,c.left-b),width:b,height:c.height+b});a.elements.right.css({top:f-b,left:c.left+c.width,width:b,height:c.height+2*b})}function q(b){b.keyCode!==a.keyCodes.ESC&&b.keyCode!==a.keyCodes.BACKSPACE&&b.keyCode!==a.keyCodes.DELETE||g.stop();return!1}h=h||{};var g={},a={opts:{namespace:h.namespace||"DomOutline",borderWidth:h.borderWidth||2,borderColor:h.borderColor||"#09c",onClick:h.onClick||!1,filter:h.filter||!1,dontStop:!h.stopOnClick||!1,hideLabel:h.hideLabel||
!1,fillContent:h.fillContent||!1},keyCodes:{BACKSPACE:8,ESC:27,DELETE:46},active:!1,initialized:!1,elements:{}};g.start=function(){m();!0!==a.active&&(a.active=!0,a.elements.label=jQuery("<div></div>").addClass(a.opts.namespace+"_label hidden").appendTo("body"),a.elements.top=jQuery("<div></div>").addClass(a.opts.namespace).appendTo("body"),a.elements.bottom=jQuery("<div></div>").addClass(a.opts.namespace).appendTo("body"),a.elements.left=jQuery("<div></div>").addClass(a.opts.namespace).appendTo("body"),
a.elements.right=jQuery("<div></div>").addClass(a.opts.namespace).appendTo("body"),jQuery("body").on("mousemove."+a.opts.namespace,p),jQuery("body").on("keyup."+a.opts.namespace,q),a.opts.onClick&&setTimeout(function(){jQuery("body").on("click."+a.opts.namespace,function(b){if(a.opts.filter&&!jQuery(b.target).is(a.opts.filter))return!1;g.stop();a.opts.onClick(g.element)})},50))};g.stop=function(){a.active=!1;n();a.opts.fillContent&&$("body").find("."+a.opts.namespace+"_fill_content").removeClass(a.opts.namespace+
"_fill_content");jQuery("body").off("mousemove."+a.opts.namespace).off("keyup."+a.opts.namespace).off("click."+a.opts.namespace)};return g};
